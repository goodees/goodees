<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_102) on Sun Dec 10 14:46:09 CET 2017 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>io.github.goodees.ese.core (ese-core 1.0-SNAPSHOT API)</title>
<meta name="date" content="2017-12-10">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="io.github.goodees.ese.core (ese-core 1.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Package</li>
<li><a href="../../../../../io/github/goodees/ese/core/async/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?io/github/goodees/ese/core/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;io.github.goodees.ese.core</h1>
<div class="docSummary">
<div class="block">Small event sourcing library.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../io/github/goodees/ese/core/EntityInvocationHandler.CompletionHandler.html" title="interface in io.github.goodees.ese.core">EntityInvocationHandler.CompletionHandler</a></td>
<td class="colLast">
<div class="block">Interface describing completion handler</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../io/github/goodees/ese/core/EntityInvocationHandler.Configuration.html" title="interface in io.github.goodees.ese.core">EntityInvocationHandler.Configuration</a>&lt;E extends <a href="../../../../../io/github/goodees/ese/core/EventSourcedEntity.html" title="class in io.github.goodees.ese.core">EventSourcedEntity</a>&gt;</td>
<td class="colLast">
<div class="block">Roll all configuration aspect into single interface.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../io/github/goodees/ese/core/EntityInvocationHandler.Lifecycle.html" title="interface in io.github.goodees.ese.core">EntityInvocationHandler.Lifecycle</a>&lt;E extends <a href="../../../../../io/github/goodees/ese/core/EventSourcedEntity.html" title="class in io.github.goodees.ese.core">EventSourcedEntity</a>&gt;</td>
<td class="colLast">
<div class="block">Configuration aspect describing lifecycle of entity instances.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../io/github/goodees/ese/core/EntityInvocationHandler.Persistence.html" title="interface in io.github.goodees.ese.core">EntityInvocationHandler.Persistence</a>&lt;E extends <a href="../../../../../io/github/goodees/ese/core/EventSourcedEntity.html" title="class in io.github.goodees.ese.core">EventSourcedEntity</a>&gt;</td>
<td class="colLast">
<div class="block">Configuration aspect describing reading and writing to persistent storage.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../io/github/goodees/ese/core/EntityInvocationHandler.ThrowingInvocation.html" title="interface in io.github.goodees.ese.core">EntityInvocationHandler.ThrowingInvocation</a>&lt;E,R,X extends <a href="http://download.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a>&gt;</td>
<td class="colLast">
<div class="block">Helper interface describing a function that may throw a checked exception.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../io/github/goodees/ese/core/EntityInvocationHandler.WorkingMemory.html" title="interface in io.github.goodees.ese.core">EntityInvocationHandler.WorkingMemory</a>&lt;E extends <a href="../../../../../io/github/goodees/ese/core/EventSourcedEntity.html" title="class in io.github.goodees.ese.core">EventSourcedEntity</a>&gt;</td>
<td class="colLast">
<div class="block">Configuration aspect describing in-memory storage of entities.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../io/github/goodees/ese/core/Event.html" title="interface in io.github.goodees.ese.core">Event</a></td>
<td class="colLast">
<div class="block">Immutable fact about business domain relevant fact that became true.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../io/github/goodees/ese/core/Event.FromEntity.html" title="interface in io.github.goodees.ese.core">Event.FromEntity</a>&lt;T&gt;</td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../io/github/goodees/ese/core/Request.html" title="interface in io.github.goodees.ese.core">Request</a>&lt;RESPONSE&gt;</td>
<td class="colLast">
<div class="block">Marker interface identifying a request and the type expected as response to it.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../io/github/goodees/ese/core/EntityInvocationHandler.html" title="class in io.github.goodees.ese.core">EntityInvocationHandler</a>&lt;E extends <a href="../../../../../io/github/goodees/ese/core/EventSourcedEntity.html" title="class in io.github.goodees.ese.core">EventSourcedEntity</a>&gt;</td>
<td class="colLast">
<div class="block">Common logic for facade to speaking with entities.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../io/github/goodees/ese/core/EventHeader.html" title="class in io.github.goodees.ese.core">EventHeader</a></td>
<td class="colLast">
<div class="block">Default implementation of required event fields.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../io/github/goodees/ese/core/EventSourcedEntity.html" title="class in io.github.goodees.ese.core">EventSourcedEntity</a></td>
<td class="colLast">
<div class="block">A single event sourced entity.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../io/github/goodees/ese/core/EventSourcingRuntimeBase.html" title="class in io.github.goodees.ese.core">EventSourcingRuntimeBase</a>&lt;E extends <a href="../../../../../io/github/goodees/ese/core/EventSourcedEntity.html" title="class in io.github.goodees.ese.core">EventSourcedEntity</a>&gt;</td>
<td class="colLast">
<div class="block">Common logic for facade to speaking with entities.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../io/github/goodees/ese/core/EventType.html" title="class in io.github.goodees.ese.core">EventType</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../io/github/goodees/ese/core/MapBasedWorkingMemory.html" title="class in io.github.goodees.ese.core">MapBasedWorkingMemory</a>&lt;E extends <a href="../../../../../io/github/goodees/ese/core/EventSourcedEntity.html" title="class in io.github.goodees.ese.core">EventSourcedEntity</a>&gt;</td>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Enum Summary table, listing enums, and an explanation">
<caption><span>Enum Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Enum</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../io/github/goodees/ese/core/EventSourcedEntity.EntityInvocationState.html" title="enum in io.github.goodees.ese.core">EventSourcedEntity.EntityInvocationState</a></td>
<td class="colLast">
<div class="block">The state entity is in.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package io.github.goodees.ese.core Description">Package io.github.goodees.ese.core Description</h2>
<div class="block">Small event sourcing library. Provides base classes for implementing event-sourcing based entities, runtime for
 coordinating execution of requests against the entities, and utility api to work with CompletableFuture.

 <h2>What is an entity?</h2>
 <p>An entity is a object that accepts requests and returns responses to them. There are multiple instances of entities,
 identified by different values of their identity, and the client usually want to address single entity with the request.
 An example would be an Order, or a bank account, or a  bank transaction. In Domain-Driven-Design terms it represents
 an aggregate root.
 <p>The entity manages change to its state via producing events, and by communication with other parts of system - other
 entities or systems (e. g. speaking to a service over http). This makes it different to JPA entities, that
 hold their state directly and usually only represent data, do not invoke other business objects.
 <p>Entity is never part of distributed transaction. The processing in non-transactional. If the entity communicates
 with third party and this communication fails, entity must compensate for the failure by putting itself in the state
 that is consistent with the fact that its dependent system failed. The only thing that is guaranteed to be atomic
 is storing of generated events.
 <p>An entity has an unique id, represented with a String.
 <p>Entities extend subclasses <code>EventSourcedEntity</code>, based on their execution style.</p>

 <h2>Runtimes and invocation of an entity</h2>
 <p>For every entity class a runtime will be implemented
 Runtime cares for creating and destroying entity instances, injecting them with their dependencies to other business
 objects, such as event storage.
 <p>Runtime also needs to guarantee that an single entity processes only single request at time (within single application on single JVM).
 For this, the matching dispatcher in implemented in <a href="../../../../../io/github/goodees/ese/core/dispatch/package-summary.html">dispatch package</a>.
 <p>Runtimes extends from a base class, that doesn't prescribe
 how this isolation should be achieved. However, the actual implementations extends from <code>DispatchingEventSourcingRuntime</code>
 that uses the aforementioned dispatcher, and in addition to simple invocation also support timeouts and delayed
 invocations.
 <p>Since the thread safety of entities is implemented via queues rather than locks in the dispatcher,
 the client is not blocked, rather requests always return a CompletionStage of a result, even if underlying execution
 of request within the entity is synchronous.
 <p>Two approaches for defining entities and runtimes exist, based
 on which kind of processing is suitable for the entity:
 <ul>
 <li><code>AsyncEntity</code> with its corresponding runtime <code>AsyncEventSourcingRuntime</code>
 process requests asynchronously returning a <code>CompletableFuture</code>, that completes when
 execution finishes. The execution method to implement is <code>AsyncEntity#execute(io.github.goodees.ese.core.Request)</code>.
 <li><code>SyncEntity</code> handled by runtime <code>SyncEventSourcingRuntime</code>
 handles request synchronously or throw an exception.
 </ul>

 <h2>Request processing flow</h2>
 The flow surrounding the invocation of the entity is described in documentation of
 <code>EventSourcingRuntimeBase#execute(java.lang.String, io.github.goodees.ese.core.Request)</code>.

 The flow of invocation within entity is described in respective execute methods of either AsyncEntity
 or SyncEntity.
 <h3>What is an side effect?</h3>
 <p>The documentation of execute method refer to term side effect. We understand a side effect as a
 <strong>reaction to a request, that doesn't change state of entity, rather may change state of some external
 system</strong> (i.e. making http call, invoking other entity, sending e-mail).</p>

 <p>We recognize three types of side effects:</p>
 <ol>
     <li>Giving response to caller. This side effect is implemented by returning from execute method, e. g.
     <code>AsyncEntity#execute(io.github.goodees.ese.core.Request)</code> or
     <code>SyncEntity#execute(io.github.goodees.ese.core.Request)</code></li>
     <li>Changing state of external system. These kind of side effects may fail. Since entity is non-transactional, it
         needs to handle the failure explicitly, and compensate for the failure by emiting more events, or corrective requests for self.
         Usually there are implemented within the flow of <code>execute</code> methods</li>
     <li>Fire and forget side effects, where the failure of the side effect does not affect the state of the entity. Such side effects
     are usually perfomed in <code>EventSourcedEntity#performPostInvocationActions(java.util.List, java.lang.Throwable)</code></li>
 </ol></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>EventSourcingRuntimeBase#execute(java.lang.String, io.github.goodees.ese.Request)</code>, 
<code>EventSourcedEntity</code>, 
<code>EventStore</code>, 
<code>Event</code>, 
<code>AsyncEntity</code>, 
<code>SyncEntity</code></dd>
</dl>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Package</li>
<li><a href="../../../../../io/github/goodees/ese/core/async/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?io/github/goodees/ese/core/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2017 <a href="https://pdudits.github.io">Patrik Duditš</a>. All Rights Reserved.</small></p>
</body>
</html>
